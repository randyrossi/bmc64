/*
 * menu.h
 *
 * Written by
 *  Randy Rossi <randy.rossi@gmail.com>
 *
 * This file is part of VICE, the Versatile Commodore Emulator.
 * See README for copyright notice.
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307  USA.
 *
 */

#include "ui.h"

#include "circle.h"

#include "emux_api.h"

#ifndef RASPI_MENU_H
#define RASPI_MENU_H

// Make sure does not exceed max choices in ui.h
#define NUM_BUTTON_ASSIGNMENTS 31

// Never used as values. Can be reorged.
typedef enum {
   MENU_ABOUT,
   MENU_LICENSE,
   MENU_ATTACH_DISK_8,
   MENU_ATTACH_DISK_9,
   MENU_ATTACH_DISK_10,
   MENU_ATTACH_DISK_11,

   MENU_DETACH_DISK_8,
   MENU_DETACH_DISK_9,
   MENU_DETACH_DISK_10,
   MENU_DETACH_DISK_11,

   MENU_SOFT_RESET,
   MENU_HARD_RESET,

   MENU_C64_ATTACH_CART,
   MENU_C64_ATTACH_CART_8K,
   MENU_C64_ATTACH_CART_16K,
   MENU_C64_ATTACH_CART_ULTIMAX,

   MENU_VIC20_ATTACH_CART_DETECT,
   MENU_VIC20_ATTACH_CART_GENERIC,
   MENU_VIC20_ATTACH_CART_16K_2000,
   MENU_VIC20_ATTACH_CART_16K_4000,
   MENU_VIC20_ATTACH_CART_16K_6000,
   MENU_VIC20_ATTACH_CART_8K_A000,
   MENU_VIC20_ATTACH_CART_4K_B000,
   MENU_VIC20_ATTACH_CART_BEHRBONZ,
   MENU_VIC20_ATTACH_CART_UM,
   MENU_VIC20_ATTACH_CART_FP,
   MENU_VIC20_ATTACH_CART_MEGACART,
   MENU_VIC20_ATTACH_CART_FINAL_EXPANSION,

   MENU_PLUS4_ATTACH_CART,

   MENU_PLUS4_ATTACH_CART_C0_LO,
   MENU_PLUS4_ATTACH_CART_C0_HI,
   MENU_PLUS4_ATTACH_CART_C1_LO,
   MENU_PLUS4_ATTACH_CART_C1_HI,
   MENU_PLUS4_ATTACH_CART_C2_LO,
   MENU_PLUS4_ATTACH_CART_C2_HI,

   MENU_PLUS4_ATTACH_CART_C0_LO_OFFSET,
   MENU_PLUS4_ATTACH_CART_C0_HI_OFFSET,
   MENU_PLUS4_ATTACH_CART_C1_LO_OFFSET,
   MENU_PLUS4_ATTACH_CART_C1_HI_OFFSET,
   MENU_PLUS4_ATTACH_CART_C2_LO_OFFSET,
   MENU_PLUS4_ATTACH_CART_C2_HI_OFFSET,

   MENU_PLUS4_DETACH_CART_C0_LO,
   MENU_PLUS4_DETACH_CART_C0_HI,
   MENU_PLUS4_DETACH_CART_C1_LO,
   MENU_PLUS4_DETACH_CART_C1_HI,
   MENU_PLUS4_DETACH_CART_C2_LO,
   MENU_PLUS4_DETACH_CART_C2_HI,

   MENU_DETACH_CART,

   MENU_ATTACH_TAPE,
   MENU_DETACH_TAPE,

   MENU_IEC_DIR,
   MENU_DISK_FILE,
   MENU_TAPE_FILE,
   MENU_C64_CART_FILE,
   MENU_C64_CART_8K_FILE,
   MENU_C64_CART_16K_FILE,
   MENU_C64_CART_ULTIMAX_FILE,

   MENU_DRIVE_ROM_FILE_1541,
   MENU_DRIVE_ROM_FILE_1541II,
   MENU_DRIVE_ROM_FILE_1551,
   MENU_DRIVE_ROM_FILE_1571,
   MENU_DRIVE_ROM_FILE_1581,
   MENU_DRIVE_ROM_FILE_CMDHD,

   MENU_DRIVE_RAM_2000,
   MENU_DRIVE_RAM_4000,
   MENU_DRIVE_RAM_6000,
   MENU_DRIVE_RAM_8000,
   MENU_DRIVE_RAM_A000,

   MENU_VIC20_CART_DETECT_FILE,
   MENU_VIC20_CART_GENERIC_FILE,
   MENU_VIC20_CART_16K_2000_FILE,
   MENU_VIC20_CART_16K_4000_FILE,
   MENU_VIC20_CART_16K_6000_FILE,
   MENU_VIC20_CART_8K_A000_FILE,
   MENU_VIC20_CART_4K_B000_FILE,
   MENU_VIC20_CART_BEHRBONZ_FILE,
   MENU_VIC20_CART_UM_FILE,
   MENU_VIC20_CART_FP_FILE,
   MENU_VIC20_CART_MEGACART_FILE,
   MENU_VIC20_CART_FINAL_EXPANSION_FILE,

   MENU_PLUS4_CART_FILE,
   MENU_PLUS4_CART_C0_LO_FILE,
   MENU_PLUS4_CART_C0_HI_FILE,
   MENU_PLUS4_CART_C1_LO_FILE,
   MENU_PLUS4_CART_C1_HI_FILE,
   MENU_PLUS4_CART_C2_LO_FILE,
   MENU_PLUS4_CART_C2_HI_FILE,

   // A menu item with on action associated with it. Just text.
   MENU_TEXT,

   MENU_SWAP_JOYSTICKS,

   MENU_JOYSTICK_PORT_1,
   MENU_JOYSTICK_PORT_2,
   MENU_JOYSTICK_PORT_3,
   MENU_JOYSTICK_PORT_4,

   MENU_CONFIG_GP_1,
   MENU_CONFIG_GP_2,

   MENU_WARP_MODE,

   MENU_AUTOSTART,
   MENU_AUTOSTART_WARP,
   MENU_AUTOSTART_FILE,

   MENU_LOADPRG,
   MENU_LOADPRG_FILE,

   MENU_IECDEVICE_8,
   MENU_IECDEVICE_9,
   MENU_IECDEVICE_10,
   MENU_IECDEVICE_11,

   MENU_IECDIR_8,
   MENU_IECDIR_9,
   MENU_IECDIR_10,
   MENU_IECDIR_11,

   MENU_COLOR_PALETTE_0,
   MENU_COLOR_PALETTE_1,

   MENU_USB_0_PREF,
   MENU_USB_1_PREF,
   MENU_USB_2_PREF,
   MENU_USB_3_PREF,

   MENU_SAVE_SETTINGS,
   MENU_KEYBOARD_MAPPING,

   MENU_TAPE_START,
   MENU_TAPE_STOP,
   MENU_TAPE_REWIND,
   MENU_TAPE_FASTFWD,
   MENU_TAPE_RESET,
   MENU_TAPE_RESET_COUNTER,
   MENU_TAPE_RECORD,

   MENU_DRIVE_SOUND_EMULATION,
   MENU_DRIVE_SOUND_EMULATION_VOLUME,

   // Relative to _0_. Keep together.
   MENU_USB_0_CONFIGURE,
   MENU_USB_1_CONFIGURE,
   MENU_USB_2_CONFIGURE,
   MENU_USB_3_CONFIGURE,
   // Relative to _0_. Keep together.
   MENU_USB_0_X_AXIS,
   MENU_USB_1_X_AXIS,
   MENU_USB_2_X_AXIS,
   MENU_USB_3_X_AXIS,
   // Relative to _0_. Keep together.
   MENU_USB_0_Y_AXIS,
   MENU_USB_1_Y_AXIS,
   MENU_USB_2_Y_AXIS,
   MENU_USB_3_Y_AXIS,
   // Relative to _0_. Keep together.
   MENU_USB_0_WATCH_RAW,
   MENU_USB_1_WATCH_RAW,
   MENU_USB_2_WATCH_RAW,
   MENU_USB_3_WATCH_RAW,
   // Relative to _0_. Keep together.
   MENU_USB_0_BTN_ASSIGN,
   MENU_USB_1_BTN_ASSIGN,
   MENU_USB_2_BTN_ASSIGN,
   MENU_USB_3_BTN_ASSIGN,

   MENU_SID_ENGINE, // VICE
   MENU_SID_MODEL,
   MENU_SID_FILTER, // VICE
   MENU_SID_SAMPLING, // VICE

   MENU_SID2_ENABLE, // VICE
   MENU_SID2_ADDRESS, // VICE
   MENU_SID2_MODEL, // VICE

   MENU_SID_WRITE_D400,  // PLUS4EMU
   MENU_SID_DIGIBLASTER, // PLUS4EMU

   MENU_ERROR_DIALOG,
   MENU_INFO_DIALOG,

   MENU_SAVE_SNAP,
   MENU_SAVE_SNAP_FILE,
   MENU_LOAD_SNAP,
   MENU_LOAD_SNAP_FILE,

   MENU_DEMO_MODE,
   MENU_OVERLAY,

   MENU_DRIVE_TYPE_8,
   MENU_DRIVE_TYPE_9,
   MENU_DRIVE_TYPE_10,
   MENU_DRIVE_TYPE_11,
   MENU_TAPE_RESET_WITH_MACHINE,

   // For display 0
   MENU_COLOR_BRIGHTNESS_0,
   MENU_COLOR_CONTRAST_0,
   MENU_COLOR_GAMMA_0,
   MENU_COLOR_TINT_0,
   MENU_COLOR_SATURATION_0,
   MENU_COLOR_RESET_0,

   // For display 1
   MENU_COLOR_BRIGHTNESS_1,
   MENU_COLOR_CONTRAST_1,
   MENU_COLOR_GAMMA_1,
   MENU_COLOR_TINT_1,
   MENU_COLOR_SATURATION_1,
   MENU_COLOR_RESET_1,

   MENU_DRIVE_MODEL_SELECT,
   MENU_DRIVE_CHANGE_MODEL_8,
   MENU_DRIVE_CHANGE_MODEL_9,
   MENU_DRIVE_CHANGE_MODEL_10,
   MENU_DRIVE_CHANGE_MODEL_11,

   MENU_DRIVE_CHANGE_ROM,
   MENU_DRIVE_CHANGE_ROM_1541,
   MENU_DRIVE_CHANGE_ROM_1541II,
   MENU_DRIVE_CHANGE_ROM_1551,
   MENU_DRIVE_CHANGE_ROM_1571,
   MENU_DRIVE_CHANGE_ROM_1581,
   MENU_DRIVE_CHANGE_ROM_CMDHD,

   MENU_DRIVE_TRUE_EMULATION,

   MENU_MAKE_CART_DEFAULT,

   // C64/Vic20
   MENU_LOAD_KERNAL,
   MENU_KERNAL_FILE,
   MENU_LOAD_BASIC,
   MENU_BASIC_FILE,
   MENU_LOAD_CHARGEN,
   MENU_CHARGEN_FILE,

   // C128
   MENU_C128_LOAD_KERNAL,
   MENU_C128_LOAD_BASIC_HI,
   MENU_C128_LOAD_BASIC_LO,
   MENU_C128_LOAD_CHARGEN,
   MENU_C128_LOAD_64_KERNAL,
   MENU_C128_LOAD_64_BASIC,
   MENU_C128_LOAD_KERNAL_FILE,
   MENU_C128_LOAD_BASIC_HI_FILE,
   MENU_C128_LOAD_BASIC_LO_FILE,
   MENU_C128_LOAD_CHARGEN_FILE,
   MENU_C128_LOAD_64_KERNAL_FILE,
   MENU_C128_LOAD_64_BASIC_FILE,

   MENU_CALC_TIMING,
   MENU_START_CALC_TIMING,

   MENU_POTX_HIGH,
   MENU_POTX_LOW,
   MENU_POTY_HIGH,
   MENU_POTY_LOW,

   MENU_HOTKEY_CF1,
   MENU_HOTKEY_CF3,
   MENU_HOTKEY_CF5,
   MENU_HOTKEY_CF7,
   MENU_HOTKEY_TF1,
   MENU_HOTKEY_TF3,
   MENU_HOTKEY_TF5,
   MENU_HOTKEY_TF7,

   MENU_SAVE_EASYFLASH,
   MENU_CART_FREEZE,

   // Relative to _0_. Keep together.
   MENU_USB_0_X_THRESH,
   MENU_USB_1_X_THRESH,
   MENU_USB_2_X_THRESH,
   MENU_USB_3_X_THRESH,

   // Relative to _0_. Keep together.
   MENU_USB_0_Y_THRESH,
   MENU_USB_1_Y_THRESH,
   MENU_USB_2_Y_THRESH,
   MENU_USB_3_Y_THRESH,

   MENU_CONFIRM_OK,
   MENU_CONFIRM_CANCEL,
   MENU_RESET_CONFIRM,

   MENU_GPIO_CONFIG,
   MENU_DPI_ENABLED,

   MENU_VIC20_MEMORY_3K,
   MENU_VIC20_MEMORY_8K_2000,
   MENU_VIC20_MEMORY_8K_4000,
   MENU_VIC20_MEMORY_8K_6000,
   MENU_VIC20_MEMORY_8K_A000,

   MENU_CREATE_D64,
   MENU_CREATE_D67,
   MENU_CREATE_D71,
   MENU_CREATE_D80,
   MENU_CREATE_D81,
   MENU_CREATE_D82,
   MENU_CREATE_D1M,
   MENU_CREATE_D2M,
   MENU_CREATE_D4M,
   MENU_CREATE_G64,
   MENU_CREATE_G71,
   MENU_CREATE_G41,
   MENU_CREATE_P64,
   MENU_CREATE_X64,
   MENU_CREATE_DHD,
   MENU_CREATE_TAP,

   MENU_CREATE_D64_FILE,
   MENU_CREATE_D67_FILE,
   MENU_CREATE_D71_FILE,
   MENU_CREATE_D80_FILE,
   MENU_CREATE_D81_FILE,
   MENU_CREATE_D82_FILE,
   MENU_CREATE_D1M_FILE,
   MENU_CREATE_D2M_FILE,
   MENU_CREATE_D4M_FILE,
   MENU_CREATE_G64_FILE,
   MENU_CREATE_G71_FILE,
   MENU_CREATE_P64_FILE,
   MENU_CREATE_X64_FILE,
   MENU_CREATE_DHD_FILE,
   MENU_CREATE_TAP_FILE,

   MENU_CONFIGURE_KEYSET1,
   MENU_CONFIGURE_KEYSET2,
   MENU_CONFIGURE_KEY_BINDINGS,
   MENU_CONFIGURE_GPIO,

   MENU_ACTIVE_DISPLAY,

   MENU_H_CENTER_0,
   MENU_V_CENTER_0,
   MENU_H_BORDER_0,
   MENU_V_BORDER_0,
   MENU_H_STRETCH_0,
   MENU_V_STRETCH_0,

   MENU_H_CENTER_1,
   MENU_V_CENTER_1,
   MENU_H_BORDER_1,
   MENU_V_BORDER_1,
   MENU_H_STRETCH_1,
   MENU_V_STRETCH_1,

   MENU_OVERLAY_PADDING,
   MENU_PIP_LOCATION,
   MENU_PIP_SWAPPED,

   MENU_40_80_COLUMN,
   MENU_VKBD_TRANSPARENCY,

   MENU_MODEL_C16_PAL,
   MENU_MODEL_PLUS4_PAL,
   MENU_MODEL_C16_NTSC,
   MENU_MODEL_PLUS4_NTSC,
   MENU_MODEL_V364_NTSC,
   MENU_MODEL_C232_NTSC,

   MENU_MODEL_PET_2001,
   MENU_MODEL_PET_3008,
   MENU_MODEL_PET_3016,
   MENU_MODEL_PET_3032,
   MENU_MODEL_PET_3032B,
   MENU_MODEL_PET_4016,
   MENU_MODEL_PET_4032,
   MENU_MODEL_PET_4032B,
   MENU_MODEL_PET_8032,
   MENU_MODEL_PET_8096,
   MENU_MODEL_PET_8296,
   MENU_MODEL_PET_SUPERPET,

   MENU_PARALLEL_8,
   MENU_PARALLEL_9,
   MENU_PARALLEL_10,
   MENU_PARALLEL_11,

   MENU_CMDHD_MODE_8,
   MENU_CMDHD_MODE_9,
   MENU_CMDHD_MODE_10,
   MENU_CMDHD_MODE_11,

   MENU_VOLUME,
   MENU_SWITCH_MACHINE,

   MENU_TAPE_FEEDBACK,
   MENU_MEMORY,
   MENU_PLUS4_3PLUS1_ROMS,

   MENU_USERPORT_JOYSTICKS,
   MENU_SWAP_USERPORT_JOYSTICKS,
   MENU_USERPORT_TYPE,

   MENU_DIR_CONVENTION,

   MENU_INTEGER_SCALE_W_0,
   MENU_INTEGER_SCALE_H_0,
   MENU_INTEGER_SCALE_W_1,
   MENU_INTEGER_SCALE_H_1,

   MENU_USE_SCALING_PARAMS_0,
   MENU_USE_SCALING_PARAMS_1,

   MENU_SCALING_INTERPOLATION,

   MENU_SHADER_ENABLE,
   MENU_SHADER_CURVATURE,
   MENU_SHADER_CURVATURE_X,
   MENU_SHADER_CURVATURE_Y,
   MENU_SHADER_SCANLINES,
   MENU_SHADER_MULTISAMPLE,
   MENU_SHADER_SCANLINE_WEIGHT,
   MENU_SHADER_SCANLINE_GAP_BRIGHTNESS,
   MENU_SHADER_MASK,
   MENU_SHADER_MASK_BRIGHTNESS,
   MENU_SHADER_BLOOM,
   MENU_SHADER_GAMMA,
   MENU_SHADER_INPUT_GAMMA,
   MENU_SHADER_OUTPUT_GAMMA,
   MENU_SHADER_SHARPER,
   MENU_SHADER_RESET_ALL,

   MENU_VIRTUAL_DEVICES,
   MENU_REU,
   MENU_REU_SIZE
} MenuID;

typedef enum {
   MENU_SUB_NONE,
   MENU_SUB_PICK_FILE,
   MENU_SUB_PICK_DIR,
   MENU_SUB_UP_DIR,
   MENU_SUB_ENTER_DIR,
   MENU_SUB_CHANGE_VOLUME,
   MENU_SUB_SELECT_VOLUME,
} MenuSubID;

// Used as indices
typedef enum {
   KEYBOARD_MAPPING_SYM = 0,
   KEYBOARD_MAPPING_POS,
   KEYBOARD_MAPPING_MAXI,
   KEYBOARD_MAPPING_PETSCIIBOARD,
} MenuKeyboardMapping;

// Used as indices
typedef enum {
   MENU_SID_ENGINE_FAST = 0,
   MENU_SID_ENGINE_RESID,
} MenuSidEngine;

// Used as indices
typedef enum {
   MENU_SID_MODEL_6581 = 0,
   MENU_SID_MODEL_8580,
} MenuSidModel;

// Used as indices
typedef enum {
   MENU_SID_SAMPLING_FAST = 0,
   MENU_SID_SAMPLING_INTERPOLATION,
   MENU_SID_SAMPLING_RESAMPLING,
   MENU_SID_SAMPLING_FAST_RESAMPLING,
} MenuSidSampling;

// Used as indices
typedef enum {
   OVERLAY_NEVER = 0,
   OVERLAY_ALWAYS,
   OVERLAY_ON_ACTIVITY
} MenuOverlayOption;

// Used as both indices and values. Don't reorg.
typedef enum {
   HOTKEY_CHOICE_NONE = 0,
   HOTKEY_CHOICE_MENU,
   HOTKEY_CHOICE_WARP,
   HOTKEY_CHOICE_STATUS_TOGGLE,
   HOTKEY_CHOICE_SWAP_PORTS,
   HOTKEY_CHOICE_TAPE_MENU,
   HOTKEY_CHOICE_CART_MENU,
   HOTKEY_CHOICE_CART_FREEZE,
   HOTKEY_CHOICE_RESET_MENU,
   HOTKEY_CHOICE_RESET_HARD,
   HOTKEY_CHOICE_RESET_SOFT,
   HOTKEY_CHOICE_ACTIVE_DISPLAY,
   HOTKEY_CHOICE_PIP_LOCATION,
   HOTKEY_CHOICE_PIP_SWAP,
   HOTKEY_CHOICE_40_80_COLUMN,
   HOTKEY_CHOICE_FLUSH_DISK,
} HotKeyChoice;

enum {
    VIC20_BLOCK_0 = 1,
    VIC20_BLOCK_1 = 1 << 1,
    VIC20_BLOCK_2 = 1 << 2,
    VIC20_BLOCK_3 = 1 << 3,
    VIC20_BLOCK_5 = 1 << 5
};

// Used as indices
typedef enum {
   MENU_STRETCH_05 = 0,
   MENU_STRETCH_06,
   MENU_STRETCH_07,
   MENU_STRETCH_08,
   MENU_STRETCH_09,
   MENU_STRETCH_10,
   MENU_STRETCH_11,
   MENU_STRETCH_12,
   MENU_STRETCH_13,
   MENU_STRETCH_14,
   MENU_STRETCH_15,
   MENU_STRETCH_16,
   MENU_STRETCH_17,
   MENU_STRETCH_18,
   MENU_STRETCH_19,
   MENU_STRETCH_20,
   MENU_STRETCH_FILL,
} MenuStretch;

// Used as indices
typedef enum {
   MENU_ACTIVE_DISPLAY_VICII = 0,
   MENU_ACTIVE_DISPLAY_VDC,
   MENU_ACTIVE_DISPLAY_SIDE_BY_SIDE,
   MENU_ACTIVE_DISPLAY_PIP,
} MenuActiveDisplay;

typedef enum {
   MENU_PIP_TOP_LEFT = 0,
   MENU_PIP_TOP_RIGHT,
   MENU_PIP_BOTTOM_RIGHT,
   MENU_PIP_BOTTOM_LEFT
} MenuPipLocation;

typedef enum {
   MENU_VOLUME_SD = 0,
   MENU_VOLUME_USB1,
   MENU_VOLUME_USB2,
   MENU_VOLUME_USB3
} MenuVolume;

typedef enum {
   MENU_DIR_CONVENTION_FOLDER_EMU = 0,
   MENU_DIR_CONVENTION_EMU_FOLDER,
} MenuDirConvention;

// Make these match vice
typedef enum {
   MENU_VIDEO_FILTER_NONE = 0,
   MENU_VIDEO_FILTER_CRT,
} MenuVideoFilter;

extern long keyset_codes[2][7];
extern long key_bindings[6];
extern char attached_disk_name[4][MAX_STR_VAL_LEN];

extern int pot_x_high_value;
extern int pot_x_low_value;
extern int pot_y_high_value;
extern int pot_y_low_value;

// Called at initialzation
void build_menu(struct menu_item *root);

void menu_swap_joysticks(void);
int statusbar_never(void);
int statusbar_always(void);

void menu_about_to_activate(void);
void menu_about_to_deactivate(void);

void menu_quick_func(int button_assignment);
const char* function_to_string(int);

#endif
